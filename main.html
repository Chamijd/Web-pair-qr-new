<!doctype html>
<html lang=en>
<head>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>CHAMA-MD-V1 SYSTEM</title>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css>
<style>body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#000428,#004e92);color:#fff;margin:0;padding:0 20px 50px 20px;overflow-y:auto}.loading-screen{position:fixed;width:100%;height:100%;background:#000;display:flex;justify-content:center;align-items:center;z-index:999;flex-direction:column}.loader{border:8px solid #fff;border-top:8px solid #00f0ff;border-radius:50%;width:80px;height:80px;animation:spin 1s linear infinite;margin-bottom:10px}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.container{padding-top:20px;text-align:center;position:relative;z-index:1;max-width:700px;margin:auto}h1{font-size:36px;margin-bottom:10px;color:#00f0ff}.system-info{background:rgba(255,255,255,.1);border:1px solid #00f0ff;border-radius:15px;padding:20px;text-align:left;backdrop-filter:blur(10px);margin-bottom:30px}.info{margin:12px 0;font-size:18px}#battery-info{color:#0fc;font-weight:700;text-shadow:0 0 5px #0fc,0 0 10px #0fc}#battery-info i{margin-right:8px;color:#0fc}.button-container{display:flex;flex-wrap:wrap;justify-content:center;gap:15px;margin-bottom:40px}.button{background:#00f0ff;color:#000;padding:16px 28px;font-size:18px;border-radius:12px;text-decoration:none;font-weight:700;transition:.3s;display:inline-flex;align-items:center}.button i{margin-right:10px}.button:hover{background:#00d0cc;transform:scale(1.07);box-shadow:0 0 12px #00f0ff}#particles-js{position:fixed;width:100%;height:100%;z-index:0;top:0;left:0}.chama-comment-box{background:rgba(0,0,0,.4);border-radius:15px;padding:20px;max-width:700px;margin:0 auto 50px auto;box-shadow:0 0 15px #00f0ff;color:#fff;text-align:left;backdrop-filter:blur(10px)}.chama-comment-box h3{color:#00f0ff;margin-bottom:15px;text-align:center;text-shadow:0 0 10px #00f0ff}input.glow-input,textarea.glow-input{width:100%;padding:12px;margin-bottom:15px;border-radius:12px;border:none;background-color:#1a1a1a;color:#fff;font-size:1rem;box-shadow:inset 0 0 8px #00f0ff;transition:box-shadow .3s ease;resize:vertical}input.glow-input:focus,textarea.glow-input:focus{outline:0;box-shadow:0 0 15px #00f0ff}button.glow-button{width:100%;background:linear-gradient(90deg,#00f0ff,#00d0cc);border:none;color:#000;font-weight:700;padding:15px;font-size:1.1rem;border-radius:12px;cursor:pointer;box-shadow:0 0 15px #00f0ff;transition:transform .3s ease,box-shadow .3s ease;font-family:'Segoe UI',sans-serif}button.glow-button:hover{transform:scale(1.05);box-shadow:0 0 25px #00f0ff,0 0 30px #00d0cc}#commentList{margin-top:25px;max-height:500px;overflow-y:auto;padding-right:10px;border-radius:10px;border:1px solid #00f0ff;background:#0a0a0a;box-shadow:inset 0 0 10px #00f0ff;color:#ddd}#commentList::-webkit-scrollbar{width:8px}#commentList::-webkit-scrollbar-thumb{background:#00f0ff;border-radius:10px}#commentList::-webkit-scrollbar-track{background:0 0}.comment-entry{background:#111;padding:12px 15px;margin-bottom:12px;border-left:5px solid #00f0ff;border-radius:10px;box-shadow:0 0 8px #00f0ff;animation:fadeInUp .7s ease forwards;color:#fff;word-wrap:break-word;position:relative}.comment-entry strong{color:#00d0cc;font-weight:700}.reply-entry{background:#0a0a0a;padding:10px;margin:8px 0 8px 20px;border-left:3px solid #00d0cc;border-radius:8px;animation:fadeInUp .5s ease forwards}.replies-container{margin-left:20px;border-left:2px solid #00f0ff;padding-left:10px}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}100%{opacity:1;transform:translateY(0)}}.delete-btn{background-color:#dc2626;color:#fff;border:none;padding:6px 12px;margin-top:8px;border-radius:8px;font-size:.9rem;cursor:pointer;transition:background-color .3s ease;position:absolute;right:10px;bottom:10px}.delete-btn:hover{background-color:#b91c1c}.like-btn{background-color:#4ade80;color:#fff;border:none;padding:6px 12px;margin-top:8px;margin-right:10px;border-radius:8px;font-size:.9rem;cursor:pointer;transition:background-color .3s ease;position:absolute;right:90px;bottom:10px}.like-btn:hover{background-color:#22c55e}.reply-btn{background-color:#3b82f6;color:#fff;border:none;padding:6px 12px;margin-top:8px;margin-right:10px;border-radius:8px;font-size:.9rem;cursor:pointer;transition:background-color .3s ease;position:absolute;right:170px;bottom:10px}.reply-btn:hover{background-color:#2563eb}.password-prompt{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:flex;justify-content:center;align-items:center;z-index:1000;flex-direction:column}.password-box{background:#111;padding:30px;border-radius:15px;border:2px solid #00f0ff;box-shadow:0 0 20px #00f0ff;width:300px;text-align:center}.password-box input{width:100%;padding:12px;margin:15px 0;border-radius:8px;border:none;background:#222;color:#fff;font-size:16px}.password-box button{background:#00f0ff;color:#000;border:none;padding:10px 20px;border-radius:8px;cursor:pointer;font-weight:700;margin:0 5px}.reply-form{display:none;margin-top:10px;padding:10px;background:rgba(0,0,0,.2);border-radius:8px}.view-replies-btn{background-color:#7c3aed;color:#fff;border:none;padding:4px 8px;border-radius:6px;font-size:.8rem;cursor:pointer;margin-left:10px}</style>
</head>
<body onload=startLoading()>
<div id=particles-js></div>
<div class=loading-screen id=loading-screen>
<div class=loader></div>
<div>Initializing CHAMA-MD...</div>
</div>
<div class=container style=display:none id=main-content>
<h1>CHAMA-MD-V1 SYSTEM</h1>
<div class=system-info>
<div class=info id=ip-info>IP Address: Loading...</div>
<div class=info id=time-info>Time: Loading...</div>
<div class=info id=weather-info>Weather: Loading...</div>
<div class=info id=battery-info><i class="fas fa-battery-half"></i> Battery Level: Loading...</div>
</div>
<div class=button-container>
<a href=/pair class=button><i class="fas fa-link"></i> Pair Code</a>
<a href=/qr class=button><i class="fas fa-qrcode"></i> QR Code</a>
<a href=https://github.com/CHMA2009/-CHAMA-MD/fork class=button><i class="fas fa-code-branch"></i> Bot Fork</a>
</div>
<section class=chama-comment-box>
<h3>Leave a Comment</h3>
<input id=commenterName class=glow-input placeholder="Your Name">
<textarea id=commentText class=glow-input placeholder="📝 Your Comment" rows=4></textarea>
<button class=glow-button onclick=postComment()>Post Comment</button>
<div id=commentList></div>
</section>
</div>
<script src=https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js></script>
<script src=https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js></script>
<script src=https://cdn.jsdelivr.net/npm/particles.js></script>
<script>let userId=localStorage.getItem("userId");function startLoading(){setTimeout((()=>{document.getElementById("loading-screen").style.display="none",document.getElementById("main-content").style.display="block",fetchIPAndTime(),fetchWeather(),fetchBatteryLevel()}),2e3)}function fetchIPAndTime(){fetch("https://api.ipify.org?format=json").then((e=>e.json())).then((e=>{document.getElementById("ip-info").innerText="IP Address: "+e.ip}));const e=new Date;document.getElementById("time-info").innerText="Time: "+e.toLocaleTimeString()}function fetchWeather(){navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const t=e.coords.latitude,n=e.coords.longitude;fetch(`https://api.weatherapi.com/v1/current.json?key=4d673b437b5b4e92952155513242605&q=${t},${n}`).then((e=>e.json())).then((e=>{const t=e.current.condition.text,n=e.current.temp_c;document.getElementById("weather-info").innerText=`Weather: ${t}, ${n}°C`}))}),(()=>{document.getElementById("weather-info").innerText="Weather: Location permission denied."})):document.getElementById("weather-info").innerText="Weather: Geolocation not supported."}async function fetchBatteryLevel(){if(navigator.getBattery){const e=await navigator.getBattery(),t=Math.round(100*e.level);document.getElementById("battery-info").innerHTML=`<i class="fas fa-battery-half"></i> Battery Level: ${t}%`,e.addEventListener("levelchange",(()=>{const t=Math.round(100*e.level);document.getElementById("battery-info").innerHTML=`<i class="fas fa-battery-half"></i> Battery Level: ${t}%`}))}else document.getElementById("battery-info").innerText="Battery info not supported."}userId||(userId="user_"+Math.random().toString(36).substr(2,9),localStorage.setItem("userId",userId)),particlesJS("particles-js",{particles:{number:{value:100},size:{value:3},color:{value:"#00f0ff"},line_linked:{enable:!0,color:"#00f0ff",opacity:.4},move:{speed:1}},interactivity:{events:{onhover:{enable:!0,mode:"repulse"}}}});const firebaseConfig={apiKey:"AIzaSyBXC2342molY7V18Ae1_JkF4t3XZ__2Wfk",authDomain:"supunmd-f1577.firebaseapp.com",databaseURL:"https://supunmd-f1577-default-rtdb.firebaseio.com",projectId:"supunmd-f1577",storageBucket:"supunmd-f1577.appspot.com",messagingSenderId:"893938799949",appId:"1:893938799949:web:0f273340a02d8449a15304",measurementId:"G-Q717X9Q32T"};firebase.initializeApp(firebaseConfig);const db=firebase.database();function postComment(){const e=document.getElementById("commenterName").value.trim(),t=document.getElementById("commentText").value.trim(),n=(new Date).toLocaleString();if(!e||!t)return void alert("Please fill in both fields");db.ref("sula-comments").push().set({name:e,comment:t,time:n,likes:0,likedBy:{},replies:{}}),document.getElementById("commenterName").value="",document.getElementById("commentText").value=""}function postReply(e){const t=document.getElementById(`replyName-${e}`).value.trim(),n=document.getElementById(`replyText-${e}`).value.trim(),l=(new Date).toLocaleString();if(!t||!n)return void alert("Please fill in both fields");db.ref(`sula-comments/${e}/replies`).push().set({name:t,comment:n,time:l,likes:0,likedBy:{}}),document.getElementById(`replyName-${e}`).value="",document.getElementById(`replyText-${e}`).value="",document.getElementById(`replyForm-${e}`).style.display="none"}function loadReplies(e,t){const n=document.getElementById(`replies-${e}`);n.innerHTML="",Object.keys(t).forEach((l=>{const o=t[l],s=!(!o.likedBy||!o.likedBy[userId]),i=document.createElement("div");i.classList.add("reply-entry"),i.id=`reply-${e}-${l}`,i.innerHTML=`\n          <strong>${escapeHtml(o.name)}</strong><br>\n          ${escapeHtml(o.comment)}<br>\n          <small style="color:#888;">${o.time}</small><br>\n          <button class="like-btn" style="right: 90px;" onclick="likeReply('${e}', '${l}')">\n            ${s?"❤️":"🤍"}  (<span id="reply-like-count-${e}-${l}">${o.likes||0}</span>)\n          </button>\n          <button class="delete-btn" onclick="showPasswordPrompt('${e}', '${l}')">🗑️</button>\n        `,n.appendChild(i)}))}function toggleReplyForm(e){const t=document.getElementById(`replyForm-${e}`);t.style.display="none"===t.style.display?"block":"none"}function likeComment(e){db.ref(`sula-comments/${e}`).transaction((e=>e?(e.likedBy||(e.likedBy={}),e.likedBy[userId]?(e.likes=(e.likes||0)-1,e.likedBy[userId]=null):(e.likes=(e.likes||0)+1,e.likedBy[userId]=!0),e):e))}function likeReply(e,t){db.ref(`sula-comments/${e}/replies/${t}`).transaction((e=>e?(e.likedBy||(e.likedBy={}),e.likedBy[userId]?(e.likes=(e.likes||0)-1,e.likedBy[userId]=null):(e.likes=(e.likes||0)+1,e.likedBy[userId]=!0),e):e))}function showPasswordPrompt(e,t=null){const n=prompt("Please enter password to delete:");"chamindu2008"===n?t?deleteReply(e,t):deleteComment(e):null!==n&&alert("Incorrect password!")}function deleteComment(e){confirm("Are you sure you want to delete this comment and all its replies?")&&db.ref("sula-comments/"+e).remove().then((()=>{const t=document.getElementById("comment-"+e);t&&t.remove()})).catch((e=>{alert("Error deleting comment: "+e.message)}))}function deleteReply(e,t){confirm("Are you sure you want to delete this reply?")&&db.ref(`sula-comments/${e}/replies/${t}`).remove().then((()=>{const n=document.getElementById(`reply-${e}-${t}`);n&&n.remove()})).catch((e=>{alert("Error deleting reply: "+e.message)}))}function escapeHtml(e){return e.replace(/[&<>"']/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]}))}db.ref("sula-comments").on("child_added",(e=>{const t=e.val(),n=e.key,l=document.getElementById("commentList");if(document.getElementById("comment-"+n))return;const o=document.createElement("div");o.classList.add("comment-entry"),o.id="comment-"+n;const s=!(!t.likedBy||!t.likedBy[userId]);o.innerHTML=`\n        <strong>${escapeHtml(t.name)}</strong><br>\n        ${escapeHtml(t.comment)}<br>\n        <small style="color:#888;">${t.time}</small><br>\n        <button class="reply-btn" onclick="toggleReplyForm('${n}')">💬</button>\n        <button class="like-btn" onclick="likeComment('${n}')">\n          ${s?"❤️":"🤍"}(<span id="like-count-${n}">${t.likes||0}</span>)\n        </button>\n        <button class="delete-btn" onclick="showPasswordPrompt('${n}')">🗑️</button>\n        \n        <div id="replyForm-${n}" class="reply-form">\n          <input type="text" id="replyName-${n}" class="glow-input" placeholder="Your Name" />\n          <textarea id="replyText-${n}" class="glow-input" placeholder="📝 Your Reply" rows="2"></textarea>\n          <button class="glow-button" onclick="postReply('${n}')">Post Reply</button>\n        </div>\n        \n        <div class="replies-container" id="replies-${n}"></div>\n      `,l.appendChild(o),t.replies&&loadReplies(n,t.replies)})),db.ref("sula-comments").on("child_changed",(e=>{const t=e.val(),n=e.key,l=document.getElementById(`like-count-${n}`);if(l){l.textContent=t.likes||0;const e=t.likedBy&&t.likedBy[userId]?"❤️":"🤍",o=document.querySelector(`#comment-${n} .like-btn`);o&&(o.innerHTML=`${e} Like (<span id="like-count-${n}">${t.likes||0}</span>)`)}t.replies&&loadReplies(n,t.replies)}))</script>
</body>
</html>
