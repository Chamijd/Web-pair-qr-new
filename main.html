<!doctype html>
<html lang=en>
<head>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>CHAMA MD WEB</title>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css>
<style>body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#000428,#004e92);color:#fff;margin:0;padding:0 20px 50px 20px;overflow-y:auto}.loading-screen{position:fixed;width:100%;height:100%;background:#000;display:flex;justify-content:center;align-items:center;z-index:999;flex-direction:column}.loader{border:8px solid #fff;border-top:8px solid #00f0ff;border-radius:50%;width:80px;height:80px;animation:spin 1s linear infinite;margin-bottom:10px}@keyframes spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}.container{padding-top:20px;text-align:center;position:relative;z-index:1;max-width:700px;margin:auto}h1{font-size:36px;margin-bottom:10px;color:#00f0ff;text-shadow:0 0 15px #00f0ff;animation:glow 2s infinite alternate}@keyframes glow{from{text-shadow:0 0 10px #00f0ff}to{text-shadow:0 0 20px #00f0ff,0 0 30px #00a1ff}}.system-info{background:rgba(255,255,255,.1);border:1px solid #00f0ff;border-radius:15px;padding:20px;text-align:left;backdrop-filter:blur(10px);margin-bottom:30px;box-shadow:0 0 20px rgba(0,240,255,.2);transition:all .3s ease}.system-info:hover{box-shadow:0 0 30px rgba(0,240,255,.4);transform:translateY(-5px)}.info{margin:12px 0;font-size:18px}#battery-info{color:#0fc;font-weight:700;text-shadow:0 0 5px #0fc,0 0 10px #0fc}#battery-info i{margin-right:8px;color:#0fc}.button-container{display:flex;flex-wrap:wrap;justify-content:center;gap:15px;margin-bottom:40px}.button{background:var(--btn-color,#00f0ff);color:#000;padding:16px 28px;font-size:18px;border-radius:12px;text-decoration:none;font-weight:700;transition:all .3s ease;display:inline-flex;align-items:center;box-shadow:0 5px 15px var(--btn-shadow,rgba(0,240,255,.4));position:relative;overflow:hidden;border:none}.button.pair-btn{--btn-color:#a855f7;--btn-shadow:rgba(168, 85, 247, 0.4)}.button.qr-btn{--btn-color:#3b82f6;--btn-shadow:rgba(59, 130, 246, 0.4)}.button.fork-btn{--btn-color:#10b981;--btn-shadow:rgba(16, 185, 129, 0.4)}.button::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:.5s}.button:hover::before{left:100%}.button i{margin-right:10px}.button:hover{background:var(--btn-hover,#00d0cc);transform:translateY(-3px) scale(1.05);box-shadow:0 8px 25px var(--btn-shadow-hover,rgba(0,240,255,.6))}.button.pair-btn:hover{--btn-hover:#9333ea;--btn-shadow-hover:rgba(168, 85, 247, 0.6)}.button.qr-btn:hover{--btn-hover:#2563eb;--btn-shadow-hover:rgba(59, 130, 246, 0.6)}.button.fork-btn:hover{--btn-hover:#059669;--btn-shadow-hover:rgba(16, 185, 129, 0.6)}#particles-js{position:fixed;width:100%;height:100%;z-index:0;top:0;left:0}.chama-comment-box{background:rgba(0,0,0,.4);border-radius:15px;padding:20px;max-width:700px;margin:0 auto 50px auto;box-shadow:0 0 15px #00f0ff;color:#fff;text-align:left;backdrop-filter:blur(10px);transition:all .3s ease}.chama-comment-box:hover{box-shadow:0 0 25px #00f0ff}.chama-comment-box h3{color:#00f0ff;margin-bottom:15px;text-align:center;text-shadow:0 0 10px #00f0ff;font-size:24px;animation:pulse 2s infinite}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}input.glow-input,textarea.glow-input{width:100%;padding:12px;margin-bottom:15px;border-radius:12px;border:none;background-color:#1a1a1a;color:#fff;font-size:1rem;box-shadow:inset 0 0 8px #00f0ff;transition:all .3s ease;resize:vertical}input.glow-input:focus,textarea.glow-input:focus{outline:0;box-shadow:0 0 15px #00f0ff,inset 0 0 8px #00f0ff;transform:translateY(-2px)}button.glow-button{width:100%;background:linear-gradient(90deg,#00f0ff,#00d0cc);border:none;color:#000;font-weight:700;padding:15px;font-size:1.1rem;border-radius:12px;cursor:pointer;box-shadow:0 0 15px #00f0ff;transition:all .3s ease;font-family:'Segoe UI',sans-serif;position:relative;overflow:hidden}button.glow-button:hover{transform:scale(1.05);box-shadow:0 0 25px #00f0ff,0 0 30px #00d0cc}button.glow-button:active{transform:scale(.98)}button.glow-button::after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transform:translateX(-100%)}button.glow-button:hover::after{animation:shine 1.5s infinite}@keyframes shine{100%{transform:translateX(100%)}}#commentList{margin-top:25px;max-height:500px;overflow-y:auto;padding-right:10px;border-radius:10px;border:1px solid #00f0ff;background:#0a0a0a;box-shadow:inset 0 0 10px #00f0ff;color:#ddd}#commentList::-webkit-scrollbar{width:8px}#commentList::-webkit-scrollbar-thumb{background:#00f0ff;border-radius:10px}#commentList::-webkit-scrollbar-track{background:0 0}.comment-entry{background:#111;padding:12px 15px;margin-bottom:12px;border-left:5px solid #00f0ff;border-radius:10px;box-shadow:0 0 8px #00f0ff;animation:fadeInUp .7s ease forwards;color:#fff;word-wrap:break-word;transition:all .3s ease;position:relative}.comment-entry:hover{transform:translateY(-3px);box-shadow:0 5px 15px #00f0ff}.comment-entry strong{color:#00d0cc;font-weight:700;text-shadow:0 0 5px #00d0cc}.reply-entry{background:#0a0a0a;padding:10px;margin:8px 0 8px 20px;border-left:3px solid #00d0cc;border-radius:8px;animation:fadeInUp .5s ease forwards;transition:all .3s ease}.reply-entry:hover{transform:translateX(5px)}.replies-container{margin-left:20px;border-left:2px solid #00f0ff;padding-left:10px;transition:all .3s ease}@keyframes fadeInUp{0%{opacity:0;transform:translateY(20px)}100%{opacity:1;transform:translateY(0)}}.comment-actions{margin-top:10px;display:flex;gap:10px;flex-wrap:wrap}.action-btn{padding:8px 15px;border-radius:8px;font-size:.9rem;cursor:pointer;transition:all .3s ease;border:none;color:#fff;display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;box-shadow:0 2px 5px rgba(0,0,0,.2)}.like-btn{background:linear-gradient(135deg,#f43f5e,#e11d48)}.like-btn:hover{background:linear-gradient(135deg,#e11d48,#be123c);transform:translateY(-2px);box-shadow:0 4px 8px rgba(225,29,72,.3)}.like-btn:active{transform:translateY(0)}.reply-btn{background:linear-gradient(135deg,#3b82f6,#2563eb)}.reply-btn:hover{background:linear-gradient(135deg,#2563eb,#1d4ed8);transform:translateY(-2px);box-shadow:0 4px 8px rgba(59,130,246,.3)}.reply-btn:active{transform:translateY(0)}.delete-btn{background:linear-gradient(135deg,#ef4444,#dc2626)}.delete-btn:hover{background:linear-gradient(135deg,#dc2626,#b91c1c);transform:translateY(-2px);box-shadow:0 4px 8px rgba(220,38,38,.3)}.delete-btn:active{transform:translateY(0)}.reply-form{display:none;margin-top:10px;padding:10px;background:rgba(0,0,0,.2);border-radius:8px;animation:fadeIn .5s ease}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.password-modal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.8);display:flex;justify-content:center;align-items:center;z-index:10000;opacity:0;pointer-events:none;transition:all .3s ease}.password-modal.active{opacity:1;pointer-events:all}.password-box{background:linear-gradient(135deg,#1a1a1a,#2a2a2a);padding:30px;border-radius:20px;border:2px solid #00f0ff;box-shadow:0 0 30px #00f0ff;width:350px;max-width:90%;text-align:center;transform:scale(.8);transition:all .3s ease;position:relative;overflow:hidden}.password-modal.active .password-box{transform:scale(1)}.password-box::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(transparent,rgba(0,240,255,.1),transparent);animation:rotate 4s linear infinite;z-index:-1}@keyframes rotate{100%{transform:rotate(360deg)}}.password-box h3{color:#00f0ff;margin-bottom:20px;font-size:24px;text-shadow:0 0 10px #00f0ff}.password-input{width:100%;padding:15px;margin:15px 0;border-radius:12px;border:none;background:rgba(0,0,0,.5);color:#fff;font-size:16px;box-shadow:inset 0 0 8px #00f0ff;transition:all .3s ease}.password-input:focus{outline:0;box-shadow:0 0 15px #00f0ff,inset 0 0 8px #00f0ff;transform:translateY(-2px)}.password-buttons{display:flex;justify-content:center;gap:15px;margin-top:20px}.password-btn{padding:12px 25px;border-radius:12px;border:none;font-weight:700;cursor:pointer;transition:all .3s ease;font-size:16px;position:relative;overflow:hidden}.confirm-btn{background:linear-gradient(135deg,#00f0ff,#00d0cc);color:#000}.confirm-btn:hover{transform:translateY(-3px);box-shadow:0 5px 15px rgba(0,240,255,.4)}.confirm-btn:active{transform:translateY(0)}.cancel-btn{background:rgba(255,255,255,.1);color:#fff}.cancel-btn:hover{background:rgba(255,255,255,.2);transform:translateY(-3px)}.cancel-btn:active{transform:translateY(0)}.confirmation-message{position:fixed;top:20px;left:50%;transform:translateX(-50%) translateY(-100px);background:linear-gradient(135deg,#4ade80,#22c55e);color:#fff;padding:15px 30px;border-radius:50px;font-weight:700;box-shadow:0 5px 20px rgba(74,222,128,.5);z-index:10000;opacity:0;transition:all .5s cubic-bezier(.68, -.55, .265, 1.55);display:flex;align-items:center}.confirmation-message.error{background:linear-gradient(135deg,#f87171,#dc2626);box-shadow:0 5px 20px rgba(220,38,38,.5)}.confirmation-message.show{opacity:1;transform:translateX(-50%) translateY(0)}.confirmation-message i{margin-right:10px;font-size:20px}.ripple{position:absolute;border-radius:50%;background:rgba(255,255,255,.7);transform:scale(0);animation:ripple .6s linear;pointer-events:none}@keyframes ripple{to{transform:scale(4);opacity:0}}@keyframes fadeOut{0%{opacity:1;transform:translateY(0)}100%{opacity:0;transform:translateY(-20px);height:0;padding:0;margin:0;border:0}}@keyframes heartBeat{0%{transform:scale(1)}14%{transform:scale(1.3)}28%{transform:scale(1)}42%{transform:scale(1.3)}70%{transform:scale(1)}}.heart-beat{animation:heartBeat 1s}@keyframes shake{0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-5px)}20%,40%,60%,80%{transform:translateX(5px)}}.shake{animation:shake .5s}</style>
</head>
<body onload=startLoading()>
<div id=particles-js></div>
<div class=loading-screen id=loading-screen>
<div class=loader></div>
<div>Initializing CHAMA-MD...</div>
</div>
<div class=container style=display:none id=main-content>
<h1>CHAMA MD WEB</h1>
<div class=system-info>
<div class=info id=ip-info>IP Address: Loading...</div>
<div class=info id=time-info>Time: Loading...</div>
<div class=info id=weather-info>Weather: Loading...</div>
<div class=info id=battery-info><i class="fas fa-battery-half"></i> Battery Level: Loading...</div>
</div>
<div class=button-container>
<a href=/pair class="button pair-btn"><i class="fas fa-link"></i> Pair Code</a>
<a href=/qr class="button qr-btn"><i class="fas fa-qrcode"></i> QR Code</a>
<a href=https://github.com/CHMA2009/-CHAMA-MD/fork class="button fork-btn"><i class="fas fa-code-branch"></i> Bot Fork</a>
</div>
<section class=chama-comment-box>
<h3>Leave a Comment</h3>
<input id=commenterName class=glow-input placeholder="Your Name">
<textarea id=commentText class=glow-input placeholder="📝 Your Comment" rows=4></textarea>
<button class=glow-button onclick=postComment()>Post Comment</button>
<div id=commentList></div>
</section>
</div>
<div class=password-modal id=passwordModal>
<div class=password-box>
<h3>Enter Password</h3>
<input type=password id=passwordInput class=password-input placeholder="Enter password...">
<div class=password-buttons>
<button class="password-btn cancel-btn" onclick=closePasswordModal()>Cancel</button>
<button class="password-btn confirm-btn" onclick=checkPassword()>Confirm</button>
</div>
</div>
</div>
<div class=confirmation-message id=confirmationMessage>
<i class="fas fa-check-circle"></i>
<span id=messageText>Action completed successfully!</span>
</div>
<script src=https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js></script>
<script src=https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js></script>
<script src=https://cdn.jsdelivr.net/npm/particles.js></script>
<script>let userId=localStorage.getItem("userId");function startLoading(){setTimeout((()=>{document.getElementById("loading-screen").style.display="none",document.getElementById("main-content").style.display="block",fetchIPAndTime(),fetchWeather(),fetchBatteryLevel()}),2e3)}function fetchIPAndTime(){fetch("https://api.ipify.org?format=json").then((e=>e.json())).then((e=>{document.getElementById("ip-info").innerText="IP Address: "+e.ip}));const e=new Date;document.getElementById("time-info").innerText="Time: "+e.toLocaleTimeString()}function fetchWeather(){navigator.geolocation?navigator.geolocation.getCurrentPosition((e=>{const t=e.coords.latitude,n=e.coords.longitude;fetch(`https://api.weatherapi.com/v1/current.json?key=4d673b437b5b4e92952155513242605&q=${t},${n}`).then((e=>e.json())).then((e=>{const t=e.current.condition.text,n=e.current.temp_c;document.getElementById("weather-info").innerText=`Weather: ${t}, ${n}°C`}))}),(()=>{document.getElementById("weather-info").innerText="Weather: Location permission denied."})):document.getElementById("weather-info").innerText="Weather: Geolocation not supported."}async function fetchBatteryLevel(){if(navigator.getBattery){const e=await navigator.getBattery(),t=Math.round(100*e.level);document.getElementById("battery-info").innerHTML=`<i class="fas fa-battery-half"></i> Battery Level: ${t}%`,e.addEventListener("levelchange",(()=>{const t=Math.round(100*e.level);document.getElementById("battery-info").innerHTML=`<i class="fas fa-battery-half"></i> Battery Level: ${t}%`}))}else document.getElementById("battery-info").innerText="Battery info not supported."}userId||(userId="user_"+Math.random().toString(36).substr(2,9),localStorage.setItem("userId",userId)),particlesJS("particles-js",{particles:{number:{value:100},size:{value:3},color:{value:"#00f0ff"},line_linked:{enable:!0,color:"#00f0ff",opacity:.4},move:{speed:1}},interactivity:{events:{onhover:{enable:!0,mode:"repulse"}}}});const firebaseConfig={apiKey:"AIzaSyBXC2342molY7V18Ae1_JkF4t3XZ__2Wfk",authDomain:"supunmd-f1577.firebaseapp.com",databaseURL:"https://supunmd-f1577-default-rtdb.firebaseio.com",projectId:"supunmd-f1577",storageBucket:"supunmd-f1577.appspot.com",messagingSenderId:"893938799949",appId:"1:893938799949:web:0f273340a02d8449a15304",measurementId:"G-Q717X9Q32T"};firebase.initializeApp(firebaseConfig);const db=firebase.database();function createRipple(e){const t=e.currentTarget,n=document.createElement("span"),o=Math.max(t.clientWidth,t.clientHeight),s=o/2;n.style.width=n.style.height=`${o}px`,n.style.left=e.clientX-t.getBoundingClientRect().left-s+"px",n.style.top=e.clientY-t.getBoundingClientRect().top-s+"px",n.classList.add("ripple");const l=t.getElementsByClassName("ripple")[0];l&&l.remove(),t.appendChild(n)}const buttons=document.getElementsByTagName("button");for(const e of buttons)e.addEventListener("click",createRipple);function postComment(){const e=document.getElementById("commenterName").value.trim(),t=document.getElementById("commentText").value.trim(),n=(new Date).toLocaleString();if(!e||!t)return void showConfirmation("Please fill in both fields!",!1);db.ref("sula-comments").push().set({name:e,comment:t,time:n,likes:0,likedBy:{},replies:{}}),document.getElementById("commenterName").value="",document.getElementById("commentText").value="",showConfirmation("Comment posted successfully!",!0)}function postReply(e){const t=document.getElementById(`replyName-${e}`).value.trim(),n=document.getElementById(`replyText-${e}`).value.trim(),o=(new Date).toLocaleString();if(!t||!n)return void showConfirmation("Please fill in both fields!",!1);db.ref(`sula-comments/${e}/replies`).push().set({name:t,comment:n,time:o,likes:0,likedBy:{}}),document.getElementById(`replyName-${e}`).value="",document.getElementById(`replyText-${e}`).value="",document.getElementById(`replyForm-${e}`).style.display="none",showConfirmation("Reply posted successfully!",!0)}let currentCommentId=null,currentReplyId=null;function loadReplies(e,t){const n=document.getElementById(`replies-${e}`);n.innerHTML="",Object.keys(t).forEach((o=>{const s=t[o],l=!(!s.likedBy||!s.likedBy[userId]),i=document.createElement("div");i.classList.add("reply-entry"),i.id=`reply-${e}-${o}`,i.innerHTML=`\n          <strong>${escapeHtml(s.name)}</strong><br>\n          ${escapeHtml(s.comment)}<br>\n          <small style="color:#888;">${s.time}</small>\n          <div class="comment-actions">\n            <button class="action-btn like-btn" onclick="likeReply('${e}', '${o}')">\n              ${l?"❤️":"🤍"} (<span id="reply-like-count-${e}-${o}">${s.likes||0}</span>)\n            </button>\n            <button class="action-btn delete-btn" onclick="showPasswordPrompt('${e}', '${o}')">🗑️ Delete</button>\n          </div>\n        `,n.appendChild(i)}))}function toggleReplyForm(e){const t=document.getElementById(`replyForm-${e}`);t.style.display="none"===t.style.display?"block":"none"}function likeComment(e){const t=db.ref(`sula-comments/${e}`),n=document.querySelector(`#comment-${e} .like-btn`);n.classList.add("heart-beat"),setTimeout((()=>{n.classList.remove("heart-beat")}),1e3),t.transaction((e=>e?(e.likedBy||(e.likedBy={}),e.likedBy[userId]?(e.likes=(e.likes||0)-1,e.likedBy[userId]=null,showConfirmation("Like removed!",!1)):(e.likes=(e.likes||0)+1,e.likedBy[userId]=!0,showConfirmation("Liked comment!",!0)),e):e))}function likeReply(e,t){const n=db.ref(`sula-comments/${e}/replies/${t}`),o=document.querySelector(`#reply-${e}-${t} .like-btn`);o.classList.add("heart-beat"),setTimeout((()=>{o.classList.remove("heart-beat")}),1e3),n.transaction((e=>e?(e.likedBy||(e.likedBy={}),e.likedBy[userId]?(e.likes=(e.likes||0)-1,e.likedBy[userId]=null,showConfirmation("Like removed!",!1)):(e.likes=(e.likes||0)+1,e.likedBy[userId]=!0,showConfirmation("Liked reply!",!0)),e):e))}function showPasswordPrompt(e,t=null){currentCommentId=e,currentReplyId=t,document.getElementById("passwordModal").classList.add("active"),document.getElementById("passwordInput").focus()}function closePasswordModal(){document.getElementById("passwordModal").classList.remove("active"),document.getElementById("passwordInput").value="",currentCommentId=null,currentReplyId=null}function checkPassword(){const e=document.getElementById("passwordInput").value,t=document.getElementById("passwordInput");"chamindu2008"===e?(closePasswordModal(),showConfirmation("Access granted!",!0),setTimeout((()=>{currentReplyId?deleteReply(currentCommentId,currentReplyId):deleteComment(currentCommentId)}),1e3)):(t.classList.add("shake"),showConfirmation("Incorrect password!",!1),setTimeout((()=>{t.classList.remove("shake")}),500),t.value="",t.focus())}function showConfirmation(e,t){const n=document.getElementById("confirmationMessage");document.getElementById("messageText").textContent=e,n.className="confirmation-message",t?n.innerHTML=`<i class="fas fa-check-circle"></i><span id="messageText">${e}</span>`:(n.innerHTML=`<i class="fas fa-times-circle"></i><span id="messageText">${e}</span>`,n.classList.add("error")),n.classList.add("show"),setTimeout((()=>{n.classList.remove("show")}),3e3)}function deleteComment(e){const t=document.getElementById("comment-"+e);t.style.animation="fadeOut 0.5s ease forwards",db.ref("sula-comments/"+e).remove().then((()=>{showConfirmation("Comment deleted successfully!",!0)})).catch((e=>{t.style.animation="",showConfirmation("Error deleting comment!",!1)}))}function deleteReply(e,t){const n=document.getElementById(`reply-${e}-${t}`);n.style.animation="fadeOut 0.5s ease forwards",db.ref(`sula-comments/${e}/replies/${t}`).remove().then((()=>{showConfirmation("Reply deleted successfully!",!0)})).catch((e=>{n.style.animation="",showConfirmation("Error deleting reply!",!1)}))}function escapeHtml(e){return e.replace(/[&<>"']/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]}))}db.ref("sula-comments").on("child_added",(e=>{const t=e.val(),n=e.key,o=document.getElementById("commentList");if(document.getElementById("comment-"+n))return;const s=document.createElement("div");s.classList.add("comment-entry"),s.id="comment-"+n;const l=!(!t.likedBy||!t.likedBy[userId]);s.innerHTML=`\n        <strong>${escapeHtml(t.name)}</strong><br>\n        ${escapeHtml(t.comment)}<br>\n        <small style="color:#888;">${t.time}</small>\n        <div class="comment-actions">\n          <button class="action-btn like-btn" onclick="likeComment('${n}')">\n            ${l?"❤️":"🤍"} (<span id="like-count-${n}">${t.likes||0}</span>)\n          </button>\n          <button class="action-btn reply-btn" onclick="toggleReplyForm('${n}')">💬 Reply</button>\n          <button class="action-btn delete-btn" onclick="showPasswordPrompt('${n}')">🗑️ Delete</button>\n        </div>\n        \n        <div id="replyForm-${n}" class="reply-form">\n          <input type="text" id="replyName-${n}" class="glow-input" placeholder="Your Name" />\n          <textarea id="replyText-${n}" class="glow-input" placeholder="📝 Your Reply" rows="2"></textarea>\n          <button class="glow-button" onclick="postReply('${n}')">Post Reply</button>\n        </div>\n        \n        <div class="replies-container" id="replies-${n}"></div>\n      `,o.appendChild(s),t.replies&&loadReplies(n,t.replies)})),db.ref("sula-comments").on("child_removed",(e=>{const t=e.key,n=document.getElementById("comment-"+t);n&&n.remove()})),db.ref("sula-comments").on("child_changed",(e=>{const t=e.val(),n=e.key;if(t.replies){const e=document.getElementById(`replies-${n}`).querySelectorAll(".reply-entry");Array.from(e).map((e=>e.id.split("-")[3])).forEach((e=>{if(!t.replies[e]){const t=document.getElementById(`reply-${n}-${e}`);t&&t.remove()}}))}})),db.ref("sula-comments").on("child_changed",(e=>{const t=e.val(),n=e.key,o=document.getElementById(`like-count-${n}`);if(o){o.textContent=t.likes||0;const e=!(!t.likedBy||!t.likedBy[userId]),s=document.querySelector(`#comment-${n} .like-btn`);s&&(s.innerHTML=`${e?"❤️":"🤍"} (<span id="like-count-${n}">${t.likes||0}</span>)`)}t.replies&&loadReplies(n,t.replies)}))</script>
</body>
</html>
